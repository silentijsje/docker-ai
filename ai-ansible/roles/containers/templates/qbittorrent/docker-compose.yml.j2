---
###########################################################################
# qBittorrent - Torrent Download Client
# Deployed by Ansible - Do not edit manually
# Documentation: https://docs.linuxserver.io/images/docker-qbittorrent
###########################################################################

services:
  qbittorrent:
    image: {{ qbittorrent_image | default('lscr.io/linuxserver/qbittorrent:latest') }}
    container_name: {{ qbittorrent_container_name | default('qbittorrent') }}
    restart: unless-stopped
    environment:
      - PUID={{ container_puid }}
      - PGID={{ container_pgid }}
      - TZ={{ container_timezone }}
      - WEBUI_PORT=8080
      - DOCKER_MODS=ghcr.io/themepark-dev/theme.park:qbittorrent
      - TP_THEME={{ container_theme }}
    volumes:
      - {{ container_data_root }}/qbittorrent:/config
      - {{ container_media_root }}/Downloads:/downloads
      - {{ container_temp_root }}:/temporary
    ports:
      - "{{ container_ports.qbittorrent }}:8080"
      - "{{ container_ports.qbittorrent_bt }}:6881/tcp"
      - "{{ container_ports.qbittorrent_bt }}:6881/udp"
    networks:
      - {{ container_network }}
    labels:
      - traefik.enable=true
      # Router
      - traefik.http.routers.qbittorrent.service=qbittorrent
      - traefik.http.routers.qbittorrent.rule=Host(`qbittorrent.{{ cloudflare_dns_zone }}`)
      - traefik.http.routers.qbittorrent.entrypoints=secureweb
      - traefik.http.routers.qbittorrent.middlewares=security-headers@file,traefik-bouncer@file
      # Service
      - traefik.http.services.qbittorrent.loadbalancer.server.scheme=http
      - traefik.http.services.qbittorrent.loadbalancer.server.port=8080

networks:
  {{ container_network }}:
    external: true
