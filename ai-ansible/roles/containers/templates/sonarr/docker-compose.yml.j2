---
###########################################################################
# Sonarr - TV Series Library Manager
# Deployed by Ansible - Do not edit manually
# Documentation: https://docs.linuxserver.io/images/docker-sonarr
###########################################################################

services:
  sonarr:
    image: {{ sonarr_image | default('lscr.io/linuxserver/sonarr:latest') }}
    container_name: {{ sonarr_container_name | default('sonarr') }}
    restart: unless-stopped
    environment:
      - PUID={{ container_puid }}
      - PGID={{ container_pgid }}
      - TZ={{ container_timezone }}
    volumes:
      - {{ container_media_root }}:/mnt/media
      - {{ container_data_root }}/sonarr:/config
    ports:
      - "{{ container_ports.sonarr }}:8989"
    networks:
      - {{ container_network }}
    labels:
      - traefik.enable=true
      # Router
      - traefik.http.routers.sonarr.service=sonarr
      - traefik.http.routers.sonarr.rule=Host(`sonarr.{{ cloudflare_dns_zone }}`)
      - traefik.http.routers.sonarr.entrypoints=secureweb
      - traefik.http.routers.sonarr.middlewares=security-headers@file,traefik-bouncer@file
      # Service
      - traefik.http.services.sonarr.loadbalancer.server.scheme=http
      - traefik.http.services.sonarr.loadbalancer.server.port=8989

networks:
  {{ container_network }}:
    external: true
